%\documentclass[11pt,a4paper]{scrbook}
\documentclass[12pt,a4paper,listof=totoc,captions=nooneline]{scrreprt} 
\usepackage{geometry}	
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[pdftex]{graphicx}
\usepackage{graphicx}
\usepackage[ngerman]{babel}
\usepackage{colortbl}	
\usepackage{xcolor}
\usepackage{soul}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
%\usepackage{tocloft}
\usepackage[colorlinks,
pdfpagelabels,
pdfstartview = FitH,
bookmarksopen = true,
bookmarksnumbered = true,
linkcolor = black,
plainpages = false,
hypertexnames = false,
citecolor = black] {hyperref}
\usepackage{amsmath, amssymb, amstext, amsfonts, mathrsfs}	% Mathe
\usepackage{selinput} 
\SelectInputMappings{ 
adieresis={ä}, 
germandbls={ß}, 
}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{graphicx}
\usepackage[onehalfspacing]{setspace}

\usepackage{chngcntr}
\counterwithout{equation}{chapter}


\definecolor{uhhred}{cmyk}{0,100,100,0}

\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
\addtokomafont{caption}{\centering}
\AfterTOCHead[lof]{\renewcommand*{\numberline}[1]{\nonumberline}}
\AfterTOCHead[toc]{\renewcommand*{\numberline}[1]{\nonumberline}}

\usepackage{selinput} 
\SelectInputMappings{ 
adieresis={ä}, 
germandbls={ß}, 
}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{graphicx}
\usepackage[onehalfspacing]{setspace}


\definecolor{uhhred}{cmyk}{0,100,100,0}

\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
\addtokomafont{caption}{\centering}
\AfterTOCHead[lof]{\renewcommand*{\numberline}[1]{\nonumberline}}
\AfterTOCHead[toc]{\renewcommand*{\numberline}[1]{\nonumberline}}

\begin{document}
\setlength{\parindent}{0pt}
%\frontmatter
\newgeometry{centering,left=2cm,right=2cm,top=2cm,bottom=2cm}
\begin{titlepage}
\includegraphics[scale=0.3]{UHH-Logo_2010_Farbe_CMYK.pdf}
\vspace*{2cm}
\Large
\begin{center} 
      {\color{uhhred}\textbf{\so{Labreport, Gruppe 4 }}}
%oder {\color{uhhred}\textbf{\so{MASTERTHESIS}}}
\vspace*{2.0cm}\\
{\LARGE \textbf{Projekt Netzwerk-Infrastruktur WS 2017/18}}
\vspace*{2.0cm}\\
vorgelegt von
\vspace*{0.4cm}\\
\textbf{Dewin Bagci:} 5bagci@informatik.uni-hamburg.de\\ \textbf{Karan Popat:} karan.popat@outlook.de \\ \textbf{ Hanife Demircioglu:} h.demircioglu@hotmail.de \\ 
\end{center}
\vspace*{3.9cm}

\noindent 
MIN-Fakultät \vspace*{0.4cm} \\ 
Fachbereich Informatik \\
Abgabedatum: 01.03.2018\\
Dozent: Robert Olotu

\end{titlepage}

\restoregeometry

\tableofcontents

%\chapter{Abkürzungsverzeichnis}

\listoffigures
%\mainmatter 


\chapter*{Part 3: Network Troubleshooting Utilities}
\addcontentsline{toc}{chapter}{Part 3: Network Troubleshooting Utilities} 

%\begin{figure}[H]
%\begin{subfigure}{0.5\textwidth}

%\includegraphics[width=0.75\textwidth]{UHH-Logo_2010_Farbe_CMYK.pdf}
%\subcaption{Subfigure Bild Nr. 1}

%\end{subfigure}
%\begin{subfigure}{0.5\textwidth}
%\includegraphics[width=0.75\textwidth]{Bild2.png}
%\subcaption{Subfigure Bild Nr. 2}
%\end{subfigure}
%\caption[Abbildung 1: Broadcast und Multicast]{Broadcast und Multicast}
%\end{figure}


\section*{Exercise 6: Managing Services (Please use pnidX-svr-mu)}
\addcontentsline{toc}{section}{Exercise 6: Managing Services (Please use pnidX-svr-mu} 
Please type and explain the meaning of the following commands:\\
1)\# chkconfig \\
2)\# \verb|chkonfig --list iptables| \\
3)\# \verb|chkconfig --level 2 iptables off| \\
4)\# \verb|chkconfig --level 2345 iptables off| \\
5)\# chkconfig iptables on | off \\
6)\# chkconfig tftp on \\
7)\# \verb|chkconfig --level 2 vsftpd off| \\
8)\# \verb|chkconfig --level 2345 vsftpd off| \\
9)\# Explain the function of xinetd \\
The super server xinetd controlled services are automatically enabled or disabled by chkconfig. \\
Please type and explain the meaning of the following commands: \\
10)\# service network stop \\
11)\# service network start \\ \\ 
Please type and explain the meaning of the following commands: \\
1) \# chkconfig \\
Die folgenden Kommandos wurden auf Rechner pnid4-svr-mu mit dem Betriebssystem Centos-6.5-x86\_64 ausgeführt. \\
Zeigt an welche Dienste in ihren jeweiligen runlevels aktiviert bzw. deaktiviert sind [siehe Abb. 1] 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_3/b1.PNG}
\end{center}
\caption[Abbildung 1: aktivierte bzw. deaktivierte Dienste eines runlevels]{aktivierte bzw. deaktivierte Dienste eines runlevels}
\end{figure}

2)\# \verb|chkonfig -- list iptables|\\
Zeigt an in welchen runlevel iptables eingeschaltet bzw. ausgeschaltet ist. [Abb. 2]
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b2.png}
\end{center}
\caption[Abbildung 2: Runlevel, in denen iptables eingeschaltet bzw. ausgeschaltet sind]{Runlevels, in denen iptables eingeschaltet bzw. ausgeschaltet sind}
\end{figure}

3)\# \verb|chkconfig --level 2 iptables off| \\
Deaktiviert iptables im runlevel 2. [Abb. 3]. Wir sehen, dass zuvor iptables im runlevel 2 aktiviert war. 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b3.png}
\end{center}
\caption[Abbildung 3: ]{runlevel 2 wird ausgeschaltet}
\end{figure}

4)\# \verb|chkconfig --level 2345 iptables off|\\
Deaktiviert iptables im runlevel 2, 3, 4 und 5. [Abb. 4]
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b4.png}
\end{center}
\caption[Abbildung 4: Runlevel 2,3,4,5 werden deaktiviert]{Runlevel 2,3,4,5 werden deaktiviert}
\end{figure}

5)\# chkconfig iptables on | off \\ Mit iptables off wird iptables auf jedem runlevel deaktiviert. Mit iptables on wird iptables auf die default Konfiguration zurückgesetzt. Das bedeutet die runlevels 2,3,4 und 5 sind wieder aktiviert.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b5.png}
\end{center}
\caption[Abbildung 5: chkconfig iptables on | off]{chkconfig iptables on | off}
\end{figure}

6)\# chkconfig tftp on \\
Tftp ist ein Vorgänger des FTP-Protokolls. Dieser service ist nicht automatisch auf Centos-6.5-x86\_64 vorinstalliert und wird durch den Superserver xinetd, welcher ebenfalls nicht automatisch vorinstalliert ist, verwaltet. Damit wir die gewissen Pakete mit allen Abhängigkeiten für tftp und xinetd über das Terminal mit yum (Yellow dog Updater, Modified) installieren können, müssen wir ein Quellpaket Repository einrichten. \\ Zuerst erstellen wir einen Ordner mit \# mkdir /dvdrom im Verzeichnis /etc/yum.repos.d \\ Danach fügen wir das Verzeichnis als neues Repository hinzu, indem wir die Konfigurationsdatei mit dem vi Editor öffnen \# vi /etc/yum.repos.d/local.repo und das Repository hinzufügen. [Abb. 6]
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_1.png}
\end{center}
\caption[Abbildung 6: vi /etc/yum.repos.d/local.repo]{vi /etc/yum.repos.d/local.repo}
\end{figure}
Zuletzt mounten wir das Verzeichnis mit dem Befehl \# mount -t iso9660/dev/sr0/dvdrom
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_2.png}
\end{center}
\caption[Abbildung 7: mounten]{mounten}
\end{figure}
Nach dem wir den Befehl \#yum clean all im Terminal ausgeführt haben, kann die Installation beginnen. Dies geschieht wie folgt: \\ Wir führen im Terminal den Befehl \#yum install tftp aus, sodass die Installation starten kann.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_3.png}
\end{center}
\caption[Abbildung 8: yum install tftp]{yum install tftp}
\end{figure}
Nachdem tftp installiert wurde, muss außerdem xinetd installiert werden. Ansonsten kann tftp nicht verwendet werden. Mit dem Befehl \#yum install xinetd wird xinetd installiert.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_4.png}
\end{center}
\caption[Abbildung 9: yum install tftp]{yum install xinetd}
\end{figure}
Zunächst muss xinetd gestartet werden, damit wir Zugriff auf tftp haben. Dies geschieht mit dem Befehl \# service xinetd start.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_5.png}
\end{center}
\caption[Abbildung 10: service xinetd start]{service xinetd start}
\end{figure}
Die Dateien im Verzeichnis /etc/xinetd.d/ enthalten die Konfigurationsdateien für jeden von xinetd verwalteten Dienst. Die Konfigurationsdatei tftp muss wie in Abbildung 15 angepasst werden. Damit tftp funktioniert, muss disable=no sein. Disable legt fest, ob der Dienst aktiv ist oder nicht. Im Regelfall ist "disable = yes" zu Beginn. Dieser muss dann geändert werden zu "diasable = no". Nach der Konfiguration kann tftp genutzt werden, wie in Abbildung 12 zu sehen ist.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_6.png}
\end{center}
\caption[Abbildung 11: ]{}
\end{figure}
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_7.png}
\end{center}
\caption[Abbildung 12: ]{}
\end{figure}
Nachdem der Befehl \# chkconfig tftp on ausgeführt wurde, kann man sich mit dem Befehl \#chkconfig anzeigenlassen, ob der Dienst wirklich aktiviert wurde, da dieser angibt welche Dienste in ihren jeweiligen runlevels aktiviert bzw. deaktiviert sind. In der Abbildung 13 sieht man, dass tftp aktiviert ist. Tftp findet man unten im Bild bei den "xinetd based services".
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b6_8.png}
\end{center}
\caption[Abbildung 13: ]{}
\end{figure}
7)\# \verb|chkconfig --level 2 vsftpd off| \\ Um diesen Befehl ausführen zu können, muss zunächst vsftpd installiert werden. Dies geschieht mit dem Befehl \# yum install vsftpd. Nach der erfolgreichen Installation kann vsftpd verwendet werden. 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b7.png}
\end{center}
\caption[Abbildung 14: yum install vsftpd]{yum install vsftpd}
\end{figure}
Mit dem Befehl \#\verb|chkconfig --level 2 vsftpd off| wird der Runlevel 2 von vsftpd deaktiviert.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b7_2.png}
\end{center}
\caption[Abbildung 15: Runlevel 2 von vsftpd wird deaktiviert]{Runlevel 2 von vsftpd wird deaktiviert}
\end{figure}
8)\# \verb|chkconfig --level 2345 vsftpd off| \\
Mit dem Befehl \#  \verb|chkconfig --level 2345 vsftpd off| werden die Runlevels 2, 3, 4 und 5 deaktiviert.\\
Zunächst haben wir mit dem Befehl "\#  \verb|chkconfig --level 2345 vsftpd|"die Runlevels 2, 3, 4 und 5 aktiviert, wie in Abbildung 16 zu sehen ist.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b8_1.png}
\end{center}
\caption[Abbildung 16: ]{}
\end{figure}

Hier sieht man, dass nach der Aktivierung die entsprechenden Runlevels aktiviert wurden.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b8_2.png}
\end{center}
\caption[Abbildung 17: ]{}
\end{figure}

Anschließend werden mit dem Befehl "\#  \verb|chkconfig --level 2345 vsftpd off|" die Runlevels 2, 3, 4 und 5 deaktiviert.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b8_3.png}
\end{center}
\caption[Abbildung 18: ]{}
\end{figure}

Man erkennt, dass die aktivierten Runlevels nach dem Ausführen des Befehls ausgeschaltet wurden.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b8_4.png}
\end{center}
\caption[Abbildung 19: ]{}
\end{figure}
9)\# Explain the function of xinetd \\
Bei xinetd handelt es sich um einen open source Superserver für Unix-Systeme. Dieser verwaltet verschiedene Dienste u.a. den FTP / HTTP Server. \\Xinetd bietet gegenüber dem Vorgänger inetd noch weitere zusätzliche Dienste an um eine verbesserte Sicherheit zu ermöglichen. Dazu zählen Zugangskontrollen, zeitliche Beschränkung von Diensten (nach Datum und Uhrzeit), sowie einen Verteidigungsmechanismus gegen Portscanner. Sobald der xinetd Superserver eingeschaltet ist, lässt sich im Terminal nachvollziehen, welche Dienste über xinetd verwaltet werden.\\
The super server xinetd controlled services are automatically enabled or disabled by chkconfig. \\
Please type and explain the meaning of the following commands: \\
10)\# service network stop\\
Der command stoppt alle konfigurierten Netzwerk interfaces.
11)\# service network start\\ Der command aktiviert alle konfigurierten Netzwerk interfaces. 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_3/b10.png}
\end{center}
\caption[Abbildung 20: ]{}
\end{figure}

\section*{Exercise 7: Configure the following network (figure 1) using ifconfig and route add}
\addcontentsline{toc}{section}{Exercise 7: Configure the following network (figure 1) using ifconfig and route add} 
You need to set the network depicted on figure 1 by doing the following: \\
Use the \dq ifconfig\dq and the \dq route add\dq commands to configure all the subnets 10.88.X.32/27, 10.88.X.64/27, 10.88.X.96/27 and 10.88.X.128/27. For this exercise you will use the hosts pnidX-svr-mu, pnidX-WEB-hn, pnidX-svr-bln and pnidX-svr-hh. Furthermore you have to configure the routers pnidX-rou-1, pnidX-rou-2 and pnidX-rou-3 \\
Hint 1: Remember after rebooting the system, the ifconfig and route add configuration will disappear\\
Hint 2: Do not forget to flush the firewall by issuing the command \dq iptables -F\dq \\
Please use Kali Linux as root:\\
\# zenmap\\
Scan the networks: \\
10.88.X.32/27 \\
10.88.X.64/27 \\
10.88.X.96/27 \\
and 10.88.X.128/27 \\\\
Ziel der Aufgaben 7, 8 und 9 ist, das folgende Netzwerk [Abb. 21] mithilfe verschiedener Kommandos aufzubauen um alle zugehörigen Subnetze zu konfigurieren. 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b1.png}
\end{center}
\caption[Abbildung 21: ]{}
\end{figure}
Zunächst haben wir das Netzwerk für den pnid4-svr-mu (Sever München) konfiguriert, indem wir die Ethernetkarte eth0 zustehende Adresse 10.88.40.129 zugewiesen haben und die Netmask-Adresse mit einbinden. Dieses haben wir ermöglicht, indem wir /27 im Anschluss hinzugefügt haben, jedoch ist es auch über dem Schlüsselwort netmask und die komplette Adresse realisierbar. \\
Anschließend haben wir die Routing tables über dem Kommando route add erstellt. Hier haben wir die Netze 10.88.40.96, 10.88.40.64 und 10.88.40.32 mit dem Kommando versehen, da wir über alle drei Netze eine Verbindung herstellen möchten. \\
Nachstehend haben wir die Firewall dieses Servers ausgeschaltet, da wir später eine Verbindung mit anderen Servern und Routern aufbauen möchten. Wir haben die ganze Konfiguration in einer txt-Datei geschrieben und im Anschluss einmal ausgeführt, sodass wir die Konfiguration gespeichert haben und nicht bei jedem Shut-Down erneut einstellen müssen. \\
\textbf{Konfigurationsdatei von Server-München:(Routing-Tabelle)} \\
ifconfig eth0 weißt der Netzwerkkarte die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b2.png}
\end{center}
\caption[Abbildung 22: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b3.png}
\end{center}
\caption[Abbildung 23: ]{}
\end{figure}

\textbf{Konfigurationsdatei von WEB-Hannover:(Routing-Tabelle)} \\
ifconfig ens33 weißt der Netzwerkkarte die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b4.png}
\end{center}
\caption[Abbildung 24: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b5.png}
\end{center}
\caption[Abbildung 25: ]{}
\end{figure}

\textbf{Konfigurationsdatei von Server-Berlin:(Routing-Tabelle)} \\
ifconfig ens33 weißt der Netzwerkkarte die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b6.png}
\end{center}
\caption[Abbildung 26: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b7.png}
\end{center}
\caption[Abbildung 27: ]{}
\end{figure}

\textbf{Konfigurationsdatei von Server-Hamburg:(Routing-Tabelle)} \\
ifconfig ens33 weißt der Netzwerkkarte die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b8.png}
\end{center}
\caption[Abbildung 28: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b9.png}
\end{center}
\caption[Abbildung 29: ]{}
\end{figure}

\textbf{Konfigurationsdatei von Router 1:(Routing-Tabelle)} \\
Wie in folgenden Ausschnitten zusehen ist haben wir die Router ebenfalls, so wie oben beschrieben, konfiguriert. Allerdings haben wir hier zwei Ethernet-Anbindungen. Denn ein Router hat immer eine Verbindung zwischen mindestens zwei Netzwerken und leitet Datenpakete anhand von Information der IP-Adressen zwischen den Netzwerken weiter. \\
Mit ifconfig ens33 und ens37 weißt man den Netzwerkkarten die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b10.png}
\end{center}
\caption[Abbildung 30: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b11.png}
\end{center}
\caption[Abbildung 31: ]{}
\end{figure}

\textbf{Konfigurationsdatei von Router 2:(Routing-Tabelle)} \\
Mit ifconfig ens33 und ens37 weißt man den Netzwerkkarten die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b12.png}
\end{center}
\caption[Abbildung 32: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b13.png}
\end{center}
\caption[Abbildung 33: ]{}
\end{figure}

\textbf{Konfigurationsdatei von Router 3:(Routing-Tabelle)} \\
Mit ifconfig ens33 und ens37 weißt man den Netzwerkkarten die zugehörige IP-Adresse zu. \\ Mit dem Befehl route add werden statische Routen zu Rechnern und Netzwerken festgeleget.
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b14.png}
\end{center}
\caption[Abbildung 34: ]{}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b15.png}
\end{center}
\caption[Abbildung 35: ]{}
\end{figure}
Please use Kali Linux as root:
\# zenmap\\
Scan the networks:\\
10.88.X.32/27\\
10.88.X.64/27\\
10.88.X.96/27\\
and 10.88.X.128/27\\
\textbf{Zenmap}\\
Zenmap ist eine grafische Ansicht für Nmap, der Ports scannen kann. Wenn man einen Rechner auf offene Ports checken möchte, dann kommt Nmap zum Einsatz. Der Network Mapper ist dafür da, um alle aktiven Hosts in der Netzwerkumgebung (über Ping) sowie deren Betriebssystem und Versionsnummern installierter Dienste herauszufinden. \\
Infolgedessen konnten wir mit dem Kommando zenmap die Verbindungen von Netzwerk 10.88.40.32, 10.88.40.64, 10.88.40.96 und 10.88.40.128 grafisch darstellen und demonstrieren, dass wir die oben aufgeführte Abbildung und somit unser Ziel erreicht haben.
\begin{center}
Das Netz 10.88.40.32/27 wird gescannt:
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b16.png}
\end{center}
\caption[Abbildung 36: Netz: 10.88.40.32/27]{Netz: 10.88.40.32/27}
\end{figure}
\begin{center}

Das Netz 10.88.40.64/27 wird gescannt:
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b17.png}
\end{center}
\caption[Abbildung 37: Netz: 10.88.40.64/27]{Netz: 10.88.40.64/27}
\end{figure}

\begin{center}
Das Netz 10.88.40.96/27 wird gescannt:
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b18.png}
\end{center}
\caption[Abbildung 38: Netz: 10.88.40.96/27]{Netz: 10.88.40.96/27}
\end{figure}

\begin{center}
Das Netz 10.88.40.128/27 wird gescannt:
\end{center}
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_3/exercise_7/b19.png}
\end{center}
\caption[Abbildung 39: Netz: 10.88.40.128/27]{Netz: 10.88.40.128/27}
\end{figure}

\section*{Exercise 8: Configure the following network (figure 1) using ip and nmcli}
\addcontentsline{toc}{section}{Exercise 8: Configure the following network (figure 1) using ip and nmcli} 

\section*{Exercise 9: Configure the following network (figure 1) using GUI}
\addcontentsline{toc}{section}{Exercise 9: Configure the following network (figure 1) using GUI} 

\chapter*{Part 4: Network Scanning}
\addcontentsline{toc}{chapter}{Part 4: Network Scanning} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.2\textwidth]{bilder/screens/Part_4/lan.PNG} 
\end{center}
\caption[Abbildung P4 figure 1 LAN]{Netzwerk mit allen Hosts und Subnetzen}
\end{figure}

\section*{Exercise 1: Configure the networks of figure 1}
\addcontentsline{toc}{section}{Exercise 1: Configure the networks of figure 1} 

\textbf{a)} Please copy, configure and set the networks for the following virtual machines provided by your instructor:\\
vm-Debian-8.5 copy from USB provided , \\
vm-Ubuntu-16-10 copy from USB provided. \\ 
The password for the virtual machines is hamburg99tkrn for Ubuntu and Debian. \\ \\
\textbf{b)} Please scan the following networks: 10.88.X.64/27, 10.88.X.96/27, 10.88.X.128/27, 10.88.X.160/27 and 10.88.X.32/27 \\ \\
\textbf{c)} Use Zenmap to scan all the above networks \\

Zenmap liefert uns alle statisch vergebenen IP Adressen der Hosts. Als Zusatz erhalten wir die Netzwerktopologie, ausgehend von dem aktuellen Host.  \\

\textbf{Solution of b)}

\begin{center}
Scan des Subnetztes 10.88.40.64/27
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/z64.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap Subnetz 64]{Subnetz 10.88.40.64/27}
\end{figure}

\begin{center}
Scan des Subnetztes 10.88.40.96/27
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/z96.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap Subnetz 96]{Subnetz 10.88.40.96/27}
\end{figure}

\begin{center}
Scan des Subnetztes 10.88.40.128/27
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/z128.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap Subnetz 128]{Subnetz 10.88.40.128/27}
\end{figure}

\begin{center}
Scan des Subnetztes 10.88.40.160/27
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/z160.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap Subnetz 160]{Subnetz 10.88.40.160/27}
\end{figure}

\begin{center}
Scan des Subnetztes 10.88.40.32/27
\end{center}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/z32.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap Subnetz 32]{Subnetz 10.88.40.32/27}
\end{figure}

\textbf{Solution of c) Use Zenmap to scan all the above networks}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_4/Exercise_1/zAlle.PNG} 
\end{center}
\caption[Abbildung P5 ex. 1 Zenmap alle Subnetze]{Alle Subnetze}
\end{figure}

Alternativ hätte man als Target auch folgendes in die Eingabemaske einfügen können: 10.88.40.32-160/27

\section*{Exercise 2: NMAP}
\addcontentsline{toc}{section}{Exercise 2: NMAP} 

Analyze your host system and your virtual machines with Nmap. Please test the following commands before explaining the meaning.  \\

Q1: Please type and explain the nmap command: nmap -sS -O 10.88.X.? \\
Q2: Please type and explain the nmap command: nmap -sF 10.88.X.? -oN outfile \\ 
Q3: Please type and explain the nmap command: nmap -sS 10.88.X.? -D 10.100.X.P \\
Q4: Please type and explain the nmap command: nmap -sS -O 10.88.X.Y/Z \\
Q5: Please type and explain the nmap command: nmap -sP -PS 10.88.X.? \\
Q6: Please type and explain the nmap command: nmap -sP -PS25 10.88.X.?  \\
Q7: Please type and explain the nmap command: nmap -sP -PS80 10.88.X.?/Z  \\
Q8: Please type and explain the nmap command: nmap -sP -PS53 10.88.X.?/27  \\
Q9: Please type and explain the nmap command: nmap -sS -v 10.88.X.? \\
Q10: Please type and explain the nmap command: nmap -sP -v 10.88.X.? \\

\textbf{Question 1:}  Please type and explain the nmap command: nmap -sS -O 10.88.X.?  \\

\textbf{Answer 1:} Scannt das Subnetz 10.88.40.128 nach dem Host mit der IP Adresse 10.88.40.130 -sS bedeutet in diesem zusammenhang SYN-Stealth-Scan. Dabei wird keine vollständige TCP/IP Vergindung aufgebaut und ist deshalb unauffäliger als das der Parameter -sT, welcher als einziger ohne root rechte Funktioniert. -O steht für OS-Detection. Es wird Versucht, an besonderen Eigenarten der Netzwerkimplementierungen das Betriebssystem des Zieles zu identifizieren. Im Gegensatz zu Zenmap, wird nmap im Terminal durchgeführt und besitzt keine grafische Benutzeroberfläche um die Netzwerktopologie zu visualisieren. 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.65\textwidth]{bilder/screens/Part_4/Exercise_2/Q1.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 1]{nmap -sS -O 10.88.40.130}
\end{figure}

\textbf{Question 2:} Please type and explain the nmap command: nmap -sF 10.88.X.? -oN outfile \\ 

\textbf{Answer 2:}  Bei diesem Scan wir das Subnetz 10.88.40.128/27 mit dem Argument -sF gescannt. -sF bezeichnet die Art des Scans bei der nur Pakete mit FIN-flags zum Ziel Host gesendet werden. Durch das Argument -oN outfile erstellen wir ein externes Logfile, mit dem Namen outfile.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_4/Exercise_2/Q2/Q21.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 2]{nmap -sF 10.88.40.128 -oN outfile}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_4/Exercise_2/Q2/Q23.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap externes Logfile]{externes Logfile}
\end{figure}

Mit dem Befehl  -sF werden die Ports, die gescannt werden manipuliert, in dem verfälschte TCP-Pakete versendet werden. Dadruch erhält man die Information, ob ein Port offen oder von einer Firewall geschützt ist.  Die Ausgabe wird im Terminal angezeigt, sowie durch das Argument -oN outfile, in einer seperaten outfilele.txt Datei. \\

\textbf{Question 3:} Please type and explain the nmap command: Please type and explain the nmap command: nmap -sS 10.88.X.? -D 10.100.X.P \\ 

\textbf{Answer 3:} Dieser Befehlt führt einen Decoy-Scan durch. Mit dem Argument -D 10.88.40.36 legen wir einen Köder aus, mit dem wir den Ziel Host / Subnetz scannen. Diese Methode wird verwendet um die eigene IP Adresse zu verbergen, jedoch sollte der Host, welcher als Köder benutzt wird eingeschaltet sein.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{bilder/screens/Part_4/Exercise_2/Q3.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 3]{nmap -sS 10.88.40.130 -D 10.88.40.36}
\end{figure}

\textbf{Question 4:} Please type and explain the nmap command: nmap -sS -O 10.88.X.Y/Z \\ 

\textbf{Answer 4:} Der Befehl versucht alle erreichbaren Hosts im Netzwerk X, mit ihrer IP Adresse anzuzuzeigen. Zusätzlich wird -sS (SYN-Stealth-Scan) und -O (OS-Detection) verwendet.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.6\textwidth]{bilder/screens/Part_4/Exercise_2/Q4.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 4]{nmap -sS -O 10.88.40.160/27}
\end{figure}

\textbf{Question 5:} Please type and explain the nmap command: nmap -sP -PS 10.88.X.?\\ 

\textbf{Answer 5:} Das Argument -sP ist der sogenannte Ping-Scan. Es werden alle Hosts ausgegeben, welche auf den Scan geantwortet haben. So kann die Verfügbarkeit eines Rechners im Netzwerk gezählt werden, sowie die Server-Verfügbarkeit überwacht werden. Das Argument -PS sendet ein leeres TCP-Paket mit gesetzten SYN-Flag. Ein SYN-Flag ist ein Synchronisations-Flag, bestehend aus einem Bit. Ist dieser Flag gesetzt, will der Sender eine Verbindung zum Empfänger aufbauen. 
 
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q5.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 5]{nmap -sP -PS 10.88.40.130}
\end{figure}

\textbf{Question 6:} Please type and explain the nmap command: nmap -sP -PS25 10.88.X.?\\ 

\textbf{Answer 6:}  Mit dem Argument -sP wird die Ping-Scan Methode ausgewählt.  -PS wird verwendet um SYN-Pakete, mit gesetztem SYN-flag über den Port 25 (SMTP) zu senden.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q6.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 6]{nmap -sP -PS25 10.88.40.130}
\end{figure}

\textbf{Question 7:} Please type and explain the nmap command: nmap -sP -PS80 10.88.X.?/Z\\ 

\textbf{Answer 7:}  Mit dem Argument -sP wird die Ping-Scan Methode ausgewählt.  -PS wird verwendet um SYN-Pakete, mit gesetztem SYN-flag über den Port 80 zu senden.  Port 80 ist zuständig für den Hypertext Transfer Protocol (HTTP). HTTP verwendet das TCP-Protokoll und benutzt diesen am Port 80.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q7.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 7]{nmap -sP -PS80 10.88.40.130/27}
\end{figure}

\textbf{Question 8:}  Please type and explain the nmap command: nmap -sP -PS53 10.88.X.?/27\\ 

\textbf{Answer 8:}  Hier wird ebenso ein TCP SYN-Scan auf dem Port 53 durchgeführt. Port 53 wird verwendet für das Domain Name System (DNS) und wird meist über UDP verwendet.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q8.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 8]{nmap -sP -PS53 10.88.40.130/27}
\end{figure}

\textbf{Question 9:}  Please type and explain the nmap command: nmap -sS -v 10.88.X.?\\ 

\textbf{Answer 9:}  -sS-Der SYN-Scan ist eine Methode fürs schnelle Scannen und scannt dabei Tausende von Ports pro Sekunde, wenn es nicht von einer Firewall gestört wird. Der Syn-Scan schließt die TCP-Verbindungen nicht ab. Außerdem kann zwischen den Zuständen offen, geschlossen und gefiltert unterschieden werden. Da keine vollständigen TCP-Verbindungen hergestellt werden, wird dies auch als halboffenes Scannen bezeichnet. Ein SYN-Paket wird gesendet. Dann wird auf eine Antwort gewartet. Ein SYN/ACK gibt an, dass jemand auf dem Port lauscht. Dies ist an einem offenen Port erkennbar. RST jedoch bedeutet, dass der Port geschlossen ist.  -v bedeutet, dass die Ausführlichkeitsstufe erhöht wird(verbosity-Level), um mehr Wirkung zu erzielen.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q9.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 9]{nmap -sS -v 10.88.40.130}
\end{figure}

\textbf{Question 10:} Please type and explain the nmap command: nmap -sP -v 10.88.X.? \\ 

\textbf{Answer 10:} Ein Ping-Scan wird ausgeführt mit erhöhtem Verbosity Level.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_2/Q10.PNG} 
\end{center}
\caption[Abbildung P4 ex. 2 nmap command 10]{nmap -sP -v 10.88.40.130}
\end{figure}

\section*{Exercise 3: Nessus network device identification}
\addcontentsline{toc}{section}{Exercise 3: Nessus network device identification} 

Nessus is a scanner program. \\

It includes following features: \\
a) It is a vulnerability scanner \\
b) It is a port scanner \\
c) It is a host/device detection program \\
d) It can be used to scan Netbios Servers e.g. Windows Servers and Samba Servers  \\
e) Nessus can be used as a penetrating testing tool\\
f) It is a client-server-system. The server performs the actual scan but it is controlled through the client. Both client and server can be run on the same system\\

In this exercise you will download, install and configure Nessus-6.11.2-es7.x86\_64.rpm (use the RPM from your instructor)
Do the following steps to install and run nessus: \\
g. \# Go to the nessus website and register your product for home feed means free cost \\
https://www.tenable.com/products/nessus/select-your-operating-system\#tos
h. \# rpm -Uvh Nessus-6.11.2-es7.x86\_64.rpm on Centos 7 \\
i. \# After registration open your email and copy the activation code and type your activation key \\
j. Now open a web browser and type the following: https://10.88.X.P:8834/ \\
Enter your login name and password that you enter while installation.
Note: download the user manual to obtain more information or refer to the internet.
Then you will perform a scan on all subnet as below and analyze the result. Exercise: \\

1.) Download Nessus from www.nessus.org (Linux Version Nessus-6.11.2 - es7.x86\_64.rpm) \\
2.) Install the Nessus-6.11.2-es7.x86\_64.rpm Binary on your Centos7 Virtual Machine \\
3.) Register Nessus to obtain the plugins (note: choose the offline method) \\
4.) Install the plugins \\
5.) Perform a host identification of the localhost \\
6.) Please scan the following networks: 10.88.X.64/27, 10.88.X.96/27, 10.88.X.128/27, 10.88.X.160/27 and 10.88.X.32/27 using nessus \\
7.) Perform a network device identification on your subnet 10.88.X.P/27, see figure 1 \\

\textbf{Einleitung:} Nessus ist ein Netzwerk- und Vulnerability Scanner. Unter einem Vulnerability Scanner versteht man Computerprogramme. Diese sind dafür zuständig Zielsysteme auf Sicherheitslücken bzw. Schwachstellen zu untersuchen. Der Scanner hat somit Zugriff auf entsprechende Datenbanken, um Informationen zu Sicherheitsproblemen zu bekommen. Dazu gehören der Einsatz bzw. das Vorhandensein von unsicheren oder nicht benötigten Dienste, Fehler in der Konfiguration bzw. Anwendung von Passwort-und Benutzerrichtlinien sowie offene Ports.\\ 

Nessus beruht auf einem Client-Server-Prinzip. Hierbei wird auf einem Rechner der Nessusserver gestartet und im Anschluss wird eine Verbindung zu anderen Rechnern hergestellt. Sobald der Server gestartet wird, werden die Plug-ins geladen. Diese sind notwendig, da man Sicherheitslücken des Betriebssystems finden kann während des Scanns eines Hostes. Nessus kann als Penetrationstest verwendet werden. Darunter versteht man Sicherheitstests eines Rechners oder von Netzwerken. Dabei wird die Sicherheit der Systembestandteile und Anwendungen eines Netzwerks überprüft. Die Mittel, die dafür verwendet werden sind Methoden, die ein Angreifer verwenden würden, um unautorisiert in das System einzudringen, weshalb dies Penetration bezeichnet wird. Man möchte somit vor Angriffen schützen. \\

\textbf{Solution of 1)} Download Nessus from www.nessus.org (Linux Version Nessus-6.11.2-
es7.x86\_64.rpm) \\

Zunächst geht man zur folgenden Webseite: https://www.tenable.com/products/nessus/select-your-operating-system. \\

Anschließend wird die entsprechende Datei für CentOS 7 runtergeladen. Diese ist: Nessus-6.11.3-es7.x86\_64.rpm. Nach dem Runterladen muss man sich noch registrieren, damit man einen Aktivierungs Code bekommt. Diesen erhält man per Email. Nach dem Herunterladen wird die Binary, wie man unten im Bild sieht, in die virtuelle Maschine reinkopiert. \\

\textbf{Solution of 2)} Install the Nessus-6.11.2-es7.x86\_64.rpm Binary on your Centos7 Virtual Machine \\

Um die Binary zu installieren wird der Befehl: rpm -Uvh /home/hanifka/Schreibtisch/Nessus-6.11.2-es7.x86\_64.rpm  im Terminal ausgeführt.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/install_nessus.PNG} 
\end{center}
\caption[Abbildung P4 ex. 3 installation Nessus]{Installation von Nessus im Terminal}
\end{figure}

Nach erfolgreicher Installation kann Nessus mit folgendem Befehl gestartet warden: /bin/systemctl start nessusd.service. Anschließend wird der Browser geöffnet und man gibt folgenden Link ein: https://localhost.localdomain:8834/, um den Scanner konfigurieren zu können. \\

\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/nessus_config.PNG} 
\end{center}

Damit dies funktioniert muss man auf den Button, Ausnahme hinzufügen, klicken. Danach muss man die Sicherheits-Ausnahmeregel bestätigen. Auch auf diesen Button wird geklickt.

\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/nessus_config2.PNG} 
\end{center}

Jetzt kann mit der Konfiguration gestartet warden.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/3.PNG} 
\end{center}
\caption[Abbildung P4 ex. 3 Konfiguration Nessus]{Nessus Konfiguration Startseite}
\end{figure}

\textbf{Solution of 3)} Register Nessus to obtain the plugins (note: choose the offline method) \\

Damit man sich erfolgreich registrieren kann, wählt man die offline Methode. Dann erhält man einen challenge code, den man fürs weitere Vorgehen benötigen wird.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.6\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/4.PNG} 
\end{center}
\caption[Abbildung P4 ex. 3  Registrierung Nessus]{Nessus Registrierung}
\end{figure}

Im Browser wird nun folgender Tab geöffnet. Hier wird zuerst unser zu eben erzeugter challenge code eingegeben und unten wird der der Aktivierungs Code eingegeben, den man per Email nach der Registrierung erhalten hat. 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/activeKey.PNG} 
\end{center}
\caption[Abbildung P4 ex. 3  Aktivierung Nessus]{Nessus Aktivierungskey}
\end{figure}

Nach dem Klicken auf Submit erhalten wir unsere Nessus License. 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/activeKey.PNG} 
\end{center}
\caption[Abbildung P4 ex. 3  License Nessus]{Nessus License}
\end{figure}

Die Nessus License kopieren wir und fügen diese ein, da sie für die erfolgreiche Registrierung notwendig ist. \\

\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/5.PNG} 
\end{center}

Nach dem alles erfolgreich konfiguriert wurde und man sich erfolgreich registriert hat, kann man sich anmelden.

\begin{center}
\includegraphics[width=0.3\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/6.PNG} 
\end{center}

\textbf{Solution of 4)} Install the plugins \\

Um die Plugins zu installieren, laden wir die notwendige Datei all-2.0.tar.gz runter und kopieren diese anschließend in die virtuelle Machine. Dort kann sie wie folgt installiert werden übers Terminal oder manuell über die GUI. \\

\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/7.PNG} 
\end{center}

Zunächst melden wir uns bei Nessus an. Unter dem Reiter Software Update können wir über den Button Manual Software Update unsere Datei all-2.0.tar.gz mit den ganzen Plugins reinladen.

\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/8.PNG} 
\end{center}

Hier sieht man, dass die Datei all-2.0.tar.gz ausgewählt wird und anschließend geladen werden kann.

\begin{center}
\includegraphics[width=0.6\textwidth]{bilder/screens/Part_4/Exercise_3/install_nessus/9.PNG} 
\end{center}

\textbf{Solution of 5)} \\ % TODO\\
\textbf{Solution of 6)} \\% TODO\\
\textbf{Solution of 7)} \\% TODO\\

\section*{Exercise 4: OpenVAS Network device identification}
\addcontentsline{toc}{section}{Exercise 4: OpenVAS Network device identification} 

\chapter*{Part 5: Sniffing, Virtual Private Network (VPN)}
\addcontentsline{toc}{chapter}{Part 5: Sniffing, Virtual Private Network (VPN)} 

\section*{Exercise 1: Configure and set the networks shown below (figure1 and 2)}
\addcontentsline{toc}{section}{Exercise 1: Configure and set the networks shown below (figure1 and 2)} 

\section*{Exercise 2: Getting started with network monitoring tools}
\addcontentsline{toc}{section}{Exercise 2: Getting started with network monitoring tools} 

\section*{Exercise 3: TCPDUMP}
\addcontentsline{toc}{section}{Exercise 3: TCPDUMP} 

\section*{Exercise 4: Wireshark}
\addcontentsline{toc}{section}{Exercise 4: Wireshark} 

\textbf{Question 1:} Please type and examine the syntax for a Wireshark command which capture filter so that all IP datagrams with source or destination IP address equal to 10.88.X.? are recorded. \\ 

\textbf{Answer 1:} Mit dem Filter: \textit{ip.addr == 10.88.40.70} können wir alle Netzwerkpakete, welche über die Schnittstelle 10.88.40.70 gesendet oer empfangen werden, abfangen und anzeigen lassen.\\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.6\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q1.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 1]{Wireshark Filter ip.addr == 10.88.40.70}
\end{figure}

\textbf{Question 2:} Please type and examine the syntax for a Wireshark display filter that shows IP datagrams with destination IP address equal to 10.88.X.? and frame size greater than 400 bytes. \\

\textbf{Answer 2:} Um alle Datenpakete abzufangen, die mindestens 400 Byte groß sind, bedarf eine kleine Erweiterung des vorherigen Befehls. Der Filter lautet nun: \textit{ip.addr == 10.88.40.70 \&\& frame.len > 400}. Mit dem Teil \textit{frame.len > X} können wir die Datenpakete nach Bytegröße X Filtern. Für X gilt, X $< 2^{32}$ $\wedge$ X $\in \mathbb{N}$. 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.55\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q2.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 2]{Wireshark Filter ip.addr == 10.88.40.70 \&\& frame.len > 400}
\end{figure}

\textbf{Question 3:} Please type and examine the syntax for a Wireshark display filter that shows packets containing ICMP messages with source or destination IP address equal to 10.88.X.? and frame numbers between 15 and 30 \\

\textbf{Answer 3:} Der Filter lautet: \textit{ip.addr == 10.88.40.70 \&\& (frame.number > 15 \&\& frame.number < 30)}. ICMP steht für Internet Control Message Protocol und übermittelt hauptsächlich Diagnose-informationen zwischen dem Router und dem Host. \\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q3.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 3]{Wireshark Filter ip.addr == 10.88.40.70 \&\& (frame.number > 15 \&\& frame.number < 30)}
\end{figure}

\textbf{Question 4:} Please type and examine the syntax for a Wireshark display filter that shows packets containing TCP segments with source or destination IP address equal to 10.88.X.? and using port number 23. \\

\textbf{Answer 4:} Damit wir alle TCP Pakete eines Hosts über die Port 23 abfangen können wird der folgende Filter eingesetzt: \textit{ip.dst == 10.88.40.70 and tcp.port == 23}. Bei TCP handelt es sich um ein Übertragungsprotokoll (Transmission Control Protocol) aus der Familie der Internetprotokolle. Port 23 ist standardisiert für den Service Telnet. 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q4.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 4]{Wireshark Filter ip.dst == 10.88.40.70 and tcp.port == 23}
\end{figure}


\textbf{Question 5:} Please type and examine a Wireshark capture filter expression for Q4. \\  

\textbf{Answer 5:} Der Filter ist ähnlich wie in Q4, lediglich die Konfiguration findet an einer anderen Stelle statt. \\ 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q5.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 5]{Wireshark Filter host 10.88.40.70 \&\& tcp port 23}
\end{figure}

\textbf{Question 6:} Please type and examine the syntax for a Wireshark command which, by default, collects packets with source or destination IP address 10.88.X.? on interface eth4. \\

\textbf{Answer 6:} Innerhalb des Terminals lässt sich der Filter: \textit{wireshark -i eth4 -k -f "host 10.88.40.70"}, anwenden. Die Argumente bedeuten dabei folgendes: -i eth4 steht für Interface, -k startet das Abfangen von Paketen und -f "host 10.88.40.70", ist der Paketfilter.\\

\textbf{Question 7:} : Please type and examine the syntax of a display filter which selects the TCP packets with destination IP address 10.88.X.?, and TCP port number 23.\\

\textbf{Answer 7:} Der Filter lautet: \textit{ip.addr == 10.88.40.70 \&\& tcp.port == 23} und fängt alle ein-/ausgehenden Pakete der Ip Adresse 10.88.40.70 über den Port 23 (Telnet) ab.\\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q7.PNG} 
\end{center}
\caption[Abbildung P5 ex. 4 Wireshark Filter 7]{Wireshark Filter ip.addr == 10.88.40.70 \&\& tcp.port == 23}
\end{figure}

\textbf{Question 8:} Please login to the server pnidX-mid-hh and start an ftp client to the server pnidXcnt-bln(vsftpd
daemon should be running on pnidX-cnt-bln). Please use
wireshark on pnidX-mid-bln to sniff or capture the username and password of the ftp service between pnidX-mid-hh and pnidX-cnt-bln. Is this possible, show your result of the capture\\

\textbf{Answer 8:} Mithilfe von Wireshark können wir leicht das ftp login Passwort herausfinden, da bei der Übertragung via ftp die Pakete unverschlüsselt übertragen werden. Dazu starten wir zunächst Wirehsark auf dem Host pnid4-mid-hh und führen ein ftp login, von cnt-bln nach mid-hh, durch. Zuerst muss der Service ftp auf beiden Host aktiv sein, deshalb überprüfen wir den Status. \\

\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q81.PNG} 
\end{center}

Danach starten wir wireshark auf dem Host mid-hh und melden uns über den Host cnt-bln bei dem Host mid-hh über den ftp servie an.  \\

\begin{center}
\includegraphics[width=0.3\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q83.PNG} 
\end{center} 

Über die Ausgabe Login successfull sehen wir, dass das anmelden erfolgreich war. Wir öffnen nun Wireshark auf dem Host mid-hh und filtern nach ftp Paketen. Dazu reicht es aus ftp in die Filtermaske einzugeben.\\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q82.PNG} 
\end{center} 
\caption[Abbildung P5 ex. 4 Wireshark Filter 8]{Wireshark Filter ftp}
\end{figure}

Wir schauen uns nun die Pakete genauer an und können die Logininformationen in einem der Pakete anzeigen lassen. \\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.4\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q84.PNG} 
\caption[Abbildung P5 ex. 4 Wireshark ftp Login Passwort]{Wireshark ftp Login Passwort}
\end{center} 
\end{figure}

Sofort sehen wir den Benutzernamen trump4 und das Passwort clinton4. Dieses Szenario zeigt wie einfach es ist die Logininformationen herauszulesen, wenn die Datenpakete unverschlüsselt übertragen werden. 

\textbf{Question 9:} Please login to the server pnidX-mid-hh and start an ssh client to the server
pnidX-cnt-bln(sshd daemon should be running on pnidX-cnt-bln). Please use wireshark on pnidX-mid-bln to sniff or capture the username and password of the ssh service between pnidX-mid-hh and pnidX-cnt-bln. Is this possible, show the result of the capture. \\

\textbf{Answer 9:} Anders als ftp werden bei shh (Secure Shell) die Pakete verschlüsselt übertragen, sodass es nicht möglich ist das Passwort mitzulesen. Zuerst prüfen wir, ob der der ssh service auf beiden Hosts aktiv ist. \\

\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q91.PNG} 
\end{center}

Danach starten wir wireshark auf dem Host mid-hh und melden uns über den Host cnt-bln bei dem Host mid-hh über den ssh servie an.  \\

\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q92.PNG} 
\end{center}

Über die Ausgabe Last login..., sehen wir, dass das anmelden erfolgreich war. Wir öffnen nun Wireshark auf dem Host mid-hh und filtern nach ssh Paketen. Dazu reicht es aus ssh in die Filtermaske einzugeben.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q93.PNG} 
\end{center} 
\caption[Abbildung P5 ex. 4 Wireshark Filter 9]{Wireshark Filter ssh}
\end{figure}

Wir schauen uns nun die Pakete genauer an und können keine Informationen über das Login erhalten, da alle Datenfragmente verschlüsselt wurden. \\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/screens/Part_5/Aufgabe_4/Q94.PNG} 
\end{center} 
\caption[Abbildung P5 ex. 4 Wireshark ssh Datenpaket]{Wireshark verschlüsselte Datenfragmente}
\end{figure}

\section*{Exercise 5: Experimenting with network monitoring tools}
\addcontentsline{toc}{section}{Exercise 5: Experimenting with network monitoring tools} 

\textbf{Exercise:} In this exercise you will connect to the webserver pnidX-cnt-bln from pnidX-mid-hh. Let pnidX-cnt-bln determine your IP-address and the OS you are running. Then, connect to
a service of your choice (e.g. ftp, http, ssh etc.) on pnidX cnt-bln. Let pnidX-mid-hh determine which services are running on pnidX-cnt-bln. \\

\textbf{Solution:} Wir führen zunächst nmap auf dem Host pnid4-cnt-bln aus und übergeben dabei die Zieladresse des Hosts pnid4-mid-hh, damit wir sehen können welche Ports geöffnet sind bzw. welcher Service auf dem Zielhost gerade aktiv ist.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.45\textwidth]{bilder/screens/Part_5/Aufgabe_5/s1.PNG} 
\end{center} 
\caption[Abbildung P5 ex. 5 nmap offene Ports anzeigen]{Zeigt uns die offenen Ports an}
\end{figure}

Wir sehen nun, dass die Ports 21 ftp, 22 ssh, 23 telnet, 80 http und 111 rpcbind offen sind und entscheiden uns via Telnet vom Quellhost pnid4-cnt-bln bei dem Zielhost pnid-mid-hh anzumelden. \\

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.45\textwidth]{bilder/screens/Part_5/Aufgabe_5/s2.PNG} 
\end{center} 
\caption[Abbildung P5 ex. 5 Telnet login]{Anmeldung via Telnet}
\end{figure}

Die Ausgabe des letzten Logins zeigt uns, dass die Anmeldung erfolgreich war.  


\section*{Exercise 6: Set up a host-to-host VPN using preshared key}
\addcontentsline{toc}{section}{Exercise 6: Set up a host-to-host VPN using preshared key} 
To create a host-to-host VPN as shown in Figure 1 using preshared keys both systems must have OPENS/WAN properly installed and tested. Next, you must ensure that IP networking is functioning. For this exercise you will capture http packets between the hosts. This capture will allow you to compare and prove that IPSec is functioning after the tunnel is created between the hosts. Make sure Apache and Wireshark are installed. See Figure 1. \\
Hints: CREATING PRESHARED KEY use ipsec ranbits 256 > filename

\section*{Exercise 7: Set up a host-to-host VPN using RSA keys}
\addcontentsline{toc}{section}{Exercise 7: Set up a host-to-host VPN using RSA keys}

\section*{Exercise 8: Set up a network-to-network VPN using preshared key}
\addcontentsline{toc}{section}{Exercise 8: Set up a network-to-network VPN using preshared key}

\section*{Exercise 9: Set up a network-to-network VPN using RSA secrets keys}
\addcontentsline{toc}{section}{Exercise 9: Set up a network-to-network VPN using RSA secrets keys}



%\backmatter 

%\chapter{Literaturverzeichnis und Quellenverzeichnis}


\end{document}